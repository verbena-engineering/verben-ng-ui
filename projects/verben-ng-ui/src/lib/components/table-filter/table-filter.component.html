<section class="filterWrapper"> 
  <div class="top"> 
    <h3 class="filterHeadling">
      Filters <span class="filterFigure"><sup>({{ savedFilters.length }})</sup></span>
    </h3>
    <button class="reset" (click)="resetFilters()">Reset</button>
  </div>
  <hr />

  <!-- Saved Filters Section -->
  <div class="center">
    <div class="savedWrapper">
      <h3>Saved Filters</h3>
      <img src="assets/icons/info.svg" alt="Info"/>
    </div>
    <div class="selectAllWrapper"  *ngIf="savedFilters.length"> 
      <input type="checkbox" [checked]="checkAll" (change)="toggleSelectAll()">
      <p>Select All</p>
    </div>
    <div *ngFor="let filter of visibleFilters; let i = index" class="centerInnerWrapper">
      <div class="checkboxWrapper">
        <span><input type="checkbox" 
          [checked]="filter.checked" 
          (click)="toggleCheckbox(i)"
          /></span>
        <p>{{ filter.type }} {{ filter.condition }} {{ filter.value }}</p>
      </div>
      <div class="iconWrapper">
        <span (click)="editFilter(i)"><img src="assets/icons/edit.svg" alt="Edit" /></span>
        <verben-svg icon="delete" [width]="15" [height]="15" color="#E20000" (click)="deleteFilter(i)"></verben-svg> 
      </div>
    </div>

    <div class="moreWrapper" *ngIf="savedFilters.length > MAX_VISIBLE_FILTERS" (click)="toggleShowMore()">
      <p >{{ showAllFilters ? 'Show less' : 'Show more' }}</p>
      <verben-svg icon="chevron" [width]="8" [height]="6" color="black"></verben-svg> 
    </div>
  </div>
  <hr />

  <!-- Operation Section -->
  <div class="bottom"> 
    <div class="savedWrapper"> 
      <h3>Operation</h3>
      <img src="assets/icons/info.svg" alt="Info" *ngIf="!isDuplicateFilter"/>
      <img src="assets/icons/dangerInfo.svg" alt="Info" *ngIf="isDuplicateFilter"/>
    </div>
    
    <div class="inputsWrapper">
      <select [(ngModel)]="selectedFilterType">
        <option value="" selected disabled>Filter By</option>
        <option *ngFor="let option of filterOptions" [value]="option">{{ option }}</option>
      </select>
      <select [(ngModel)]="selectedCondition" (change)="checkDuplicateFilter()">
        <option value="" selected disabled>Select</option>
        <option value="equal">Equal</option>
        <option value="before" *ngIf="selectedFilterType === 'Date'">Before</option>
        <option value="after" *ngIf="selectedFilterType === 'Date'">After</option>
        <option value="less than" *ngIf="selectedFilterType !== 'Date'">Less than</option>
        <option value="greater than" *ngIf="selectedFilterType !== 'Date'">Greater than</option>
      </select>

      <!-- Input for value (text/number) -->
      <input *ngIf="selectedFilterType === 'Date'" type="date" [(ngModel)]="inputValue" />
      <input *ngIf="selectedFilterType !== 'Date'" type="text" placeholder="#1,000,000" [(ngModel)]="inputValue" />
    </div>

    <div class="btnWrapper">
      <button class="addBtn" (click)="addFilter()">
        + Add
      </button>
    </div>
    <hr />

    <div class="btnWrapper">
      <button class="filterBtn" (click)="applyFilters()">
        Filter
      </button>
    </div>
  </div>
</section>
